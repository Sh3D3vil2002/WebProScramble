<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel="stylesheet" type="text/css" href="style.css">

	<title>Scramble</title>
</head>

<body>
	<div class="container">
		<form class="login-email">
			<p class="login-text" style="font-size: 2rem; font-weight: 800;">Register</p>
			<div class="input-group">
				<input type="text" placeholder="First Name" id="fname" name="fname" required>
			</div>
			<div class="input-group">
				<input type="text" placeholder="Last Name" id="lname" name="lname" required>
			</div>
			<div class="input-group">
				<input type="email" placeholder="Email" id="email" required>
			</div>
			<div class="input-group">
				<input type="Date" placeholder="Date Of Birth" id="dob" required>
			</div>
			<div class="input-group">
				<input type="text" placeholder="Age" id="age" disabled>
			</div>
			<div class="input-group">
				<select class="input-group" id="gender" name="gender" required>
					<option value="other">Select A Gender</option>
					<option value="male">Male</option>
					<option value="female">Female</option>
				</select>
			</div>
			<div class="input-group">
				<button type="submit" name="submit" class="btn" onclick="register()">Register</button>
			</div>
			<div class="input-group">
				<button type="button" name="start" class="btn" id="start-btn" onclick="PlayGame()">Start</button>
			</div>
			<div class="input-group">
				<button type="button" name="end" class="btn" id="end-btn" onclick="endGame()" disabled>End</button>
			</div>
		</form>
		<div class="play-area" id="play-area" style="display: none;">
			<p class="login-text" style="font-size: 2rem; font-weight: 800;">Scramble Game</p>
			<div class="input-group">
				<input type="text" placeholder="Enter Your Answer" id="answer-input" name="answer" required disabled>
			</div>
			<div class="input-group">
				<button type="button" name="accept" id="accept-btn" class="btn" onclick="CheckAnswer()"
					disabled>Accept</button>
			</div>
			<div class="input-group">
				<button type="button" name="next" class="btn" id="next-btn" onclick="PlayGame()" disabled>Next</button>
			</div>
			<div class="input-group">
				<p id="chars" style="font-size: 2rem; font-weight: 800;"></p>
			</div>
		</div>
	</div>
</body>
<script>
	// Define global variables
	var PlayersData = [];
	var gameCharacters = [];
	var answerInput = document.getElementById("answer-input");
	var acceptBtn = document.getElementById("accept-btn");
	var nextBtn = document.getElementById("next-btn");

	// Disable game controls
	answerInput.disabled = true;
	acceptBtn.disabled = true;
	nextBtn.disabled = true;

	function register() {
		// Disable all form fields and the register button
		document.querySelectorAll(".input-group input, .input-group select, .input-group button").forEach(function (el) {
			el.disabled = true;
		});

		// Enable the "End" and "Start" buttons
		document.querySelector("#end-btn").disabled = false;
		document.querySelector("#start-btn").disabled = false;
		//Validate the name
		var fname = document.getElementById("fname").value;
		var lname = document.getElementById("lname").value;
		var email = document.getElementById("email").value;
		// Check if first and last name are at least 3 characters long
		if (fname.length < 3 || lname.length < 3) {
			alert("First and Last Names must be more than three (3) characters in length.");
			return false;
		}

		// Validate email
		var emailRegex = /^[a-zA-Z0-9._-]+@gmail\.com$/;
		if (!emailRegex.test(email)) {
			alert("Email address must be a valid Gmail address.");
			return false;
		}

		//Validate age
		// Get the user's date of birth from the input field
		var dob = new Date(document.getElementById("dob").value);

		// Calculate the user's age based on their date of birth
		var ageDiffMs = Date.now() - dob.getTime();
		var ageDate = new Date(ageDiffMs);
		var age = Math.abs(ageDate.getUTCFullYear() - 1970);

		// Display the user's age on the page
		var ageEl = document.getElementById("age");
		ageEl.value = age;

		// Check if the user is at least 18 years old
		if (age >= 8 && age <= 12) {
			ageEl.style.color = "green";
		} else {
			ageEl.style.color = "red";
			ageEl.value += " (between 8 and 12 years old)";
		}

		// Add the player's data to the PlayersData array
		PlayersData.push({
			firstName: fname,
			lastName: lname,
			email: email,
			dob: dob,
			age: age,
			gender: document.getElementById("gender").value
		});

		return false;
	}

	function PlayGame() {
		// Generate a random string of characters
		var characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
		var numCharacters = Math.floor(Math.random() * 3) + 4;
		var randomString = "";
		for (var i = 0; i < numCharacters; i++) {
			randomString += characters.charAt(Math.floor(Math.random() * characters.length));
		}

		// Display the random string in the play area
		document.getElementById("play-area").value = randomString;

		// Enable the answer input, accept button, and next button
		document.getElementById("answer-input").disabled = false;
		document.getElementById("accept-btn").disabled = false;
		document.getElementById("next-btn").disabled = false;

		// Clear the answer input field
		document.getElementById("answer-input").value = "";

		// Set focus to the answer input field
		document.getElementById("answer-input").focus();
	}

	function CheckAnswer() {
		// get the player's answer
		var answer = document.getElementById("answer-input").value.trim();

		// validate the answer
		if (answer == "") {
			alert("Please enter your answer.");
			return;
		}

		// get the original characters
		var originalChars = document.getElementById("play-area").value.trim();

		// check if the answer is correct
		var isCorrect = (answer.toLowerCase() == originalChars.toLowerCase());

		// append the result to the PlayersData array
		var playerData = {
			originalChars: originalChars,
			answer: answer,
			isCorrect: isCorrect
		};
		PlayersData.push(playerData);

		// update the score
		var scoreElem = document.getElementById("score");
		if (isCorrect) {
			scoreElem.value = parseInt(scoreElem.value) + 1;
		}

		// disable the answer input and Accept button, and enable the Next button
		document.getElementById("answer-input").disabled = true;
		document.getElementById("accept-btn").disabled = true;
		document.getElementById("next-btn").disabled = false;
	}

	// Get the form element
	var form = document.querySelector('.login-email');

	// Add an event listener for the form submission
	form.addEventListener('submit', function (event) {
		// Prevent the default form submission behavior
		event.preventDefault();

		// Call the register function
		register();
	});

</script>

</html>